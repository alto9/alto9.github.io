

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Open edX development &mdash; Peddler  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration and customisation" href="configuration.html" />
    <link rel="prev" title="Kubernetes deployment" href="k8s.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #009CEA" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/./img/peddler_logo_light.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">User guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gettingstarted.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="run.html">Running OpenCart</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="local.html">Local deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="k8s.html">Kubernetes deployment</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Open edX development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-a-local-development-webserver">Run a local development webserver</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-arbitrary-commands">Running arbitrary commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bind-mount-container-directories">Bind-mount container directories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bind-mount-from-the-volumes-directory">Bind-mount from the “volumes/” directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#manual-bind-mount-to-any-directory">Manual bind-mount to any directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#override-docker-compose-volumes">Override docker-compose volumes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#point-to-a-local-edx-platform">Point to a local edx-platform</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prepare-the-edx-platform-repo">Prepare the edx-platform repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debug-edx-platform">Debug edx-platform</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#xblock-and-edx-platform-plugin-development">XBlock and edx-platform plugin development</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customised-themes">Customised themes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-edx-platform-settings">Custom edx-platform settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-edx-platform-unit-tests">Running edx-platform unit tests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration and customisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="peddler.html">Peddler development</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Peddler</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="run.html">Running OpenCart</a> &raquo;</li>
        
      <li>Open edX development</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/alto9/peddler/blob/master/docs/dev.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="open-edx-development">
<span id="development"></span><h1>Open edX development<a class="headerlink" href="#open-edx-development" title="Permalink to this headline">¶</a></h1>
<p>In addition to running Open edX in production, Tutor can be used for local development of Open edX. This means that it is possible to hack on Open edX without setting up a Virtual Machine. Essentially, this replaces the devstack provided by edX.</p>
<p>The following commands assume you have previously launched a <a class="reference internal" href="local.html#local"><span class="std std-ref">local</span></a> Open edX platform. If you have not done so already, you should run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">local</span> <span class="n">quickstart</span>
</pre></div>
</div>
<p>In order to run the platform in development mode, you <strong>must</strong> answer no (“n”) to the question “Are you configuring a production platform”.</p>
<p>Note that the local.overhang.io <a class="reference external" href="https://dnschecker.org/#A/local.overhang.io">domain</a> and its <a class="reference external" href="https://dnschecker.org/#CNAME/studio.local.overhang.io">subdomains</a> all point to 127.0.0.1. This is just a domain name that was setup to conveniently access a locally running Open edX platform.</p>
<p>Once the local platform has been configured, you should stop it so that it does not interfere with the development environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">local</span> <span class="n">stop</span>
</pre></div>
</div>
<p>Finally, you should build the <code class="docutils literal notranslate"><span class="pre">openedx-dev</span></code> docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">images</span> <span class="n">build</span> <span class="n">openedx</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">openedx-dev</span></code> development image differs from the <code class="docutils literal notranslate"><span class="pre">openedx</span></code> production image:</p>
<ul class="simple">
<li><p>The user that runs inside the container has the same UID as the user on the host, in order to avoid permission problems inside mounted volumes (and in particular in the edx-platform repository).</p></li>
<li><p>Additional python and system requirements are installed for convenient debugging: <a class="reference external" href="https://ipython.org/">ipython</a>, <a class="reference external" href="https://pypi.org/project/ipdb/">ipdb</a>, vim, telnet.</p></li>
<li><p>The edx-platform <a class="reference external" href="https://github.com/edx/edx-platform/blob/open-release/lilac.master/requirements/edx/development.in">development requirements</a> are installed.</p></li>
</ul>
<p>Since the <code class="docutils literal notranslate"><span class="pre">openedx-dev</span></code> is based upon the <code class="docutils literal notranslate"><span class="pre">openedx</span></code> docker image, it should be re-built every time the <code class="docutils literal notranslate"><span class="pre">openedx</span></code> docker image is modified.</p>
<section id="run-a-local-development-webserver">
<h2>Run a local development webserver<a class="headerlink" href="#run-a-local-development-webserver" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="n">lms</span> <span class="c1"># Access the lms at http://local.overhang.io:8000</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="n">cms</span> <span class="c1"># Access the cms at http://studio.local.overhang.io:8001</span>
</pre></div>
</div>
</section>
<section id="running-arbitrary-commands">
<h2>Running arbitrary commands<a class="headerlink" href="#running-arbitrary-commands" title="Permalink to this headline">¶</a></h2>
<p>To run any command inside one of the containers, run <code class="docutils literal notranslate"><span class="pre">tutor</span> <span class="pre">dev</span> <span class="pre">run</span> <span class="pre">[OPTIONS]</span> <span class="pre">SERVICE</span> <span class="pre">[COMMAND]</span> <span class="pre">[ARGS]...</span></code>. For instance, to open a bash shell in the LMS or CMS containers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="n">lms</span> <span class="n">bash</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="n">cms</span> <span class="n">bash</span>
</pre></div>
</div>
<p>To open a python shell in the LMS or CMS, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="n">lms</span> <span class="o">./</span><span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">lms</span> <span class="n">shell</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="n">cms</span> <span class="o">./</span><span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">cms</span> <span class="n">shell</span>
</pre></div>
</div>
<p>You can then import edx-platform and django modules and execute python code.</p>
<p>To collect assets, you can use the <code class="docutils literal notranslate"><span class="pre">openedx-assets</span></code> command that ships with Tutor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="n">lms</span> <span class="n">openedx</span><span class="o">-</span><span class="n">assets</span> <span class="n">build</span> <span class="o">--</span><span class="n">env</span><span class="o">=</span><span class="n">dev</span>
</pre></div>
</div>
</section>
<section id="bind-mount-container-directories">
<span id="bind-mounts"></span><h2>Bind-mount container directories<a class="headerlink" href="#bind-mount-container-directories" title="Permalink to this headline">¶</a></h2>
<p>It may sometimes be convenient to mount container directories on the host, for instance: for editing and debugging. Tutor provides different solutions to this problem.</p>
<section id="bind-mount-from-the-volumes-directory">
<h3>Bind-mount from the “volumes/” directory<a class="headerlink" href="#bind-mount-from-the-volumes-directory" title="Permalink to this headline">¶</a></h3>
<p>Tutor makes it easy to create a bind-mount from an existing container. First, copy the contents of a container directory with the <code class="docutils literal notranslate"><span class="pre">bindmount</span></code> command. For instance, to copy the virtual environment of the “lms” container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">bindmount</span> <span class="n">lms</span> <span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">venv</span>
</pre></div>
</div>
<p>This command recursively copies the contents of the <code class="docutils literal notranslate"><span class="pre">/opendedx/venv</span></code> directory to <code class="docutils literal notranslate"><span class="pre">$(tutor</span> <span class="pre">config</span> <span class="pre">printroot)/volumes/venv</span></code>. The code of any Python dependency can then be edited – for instance, you can then add a <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">ipdb;</span> <span class="pre">ipdb.set_trace()</span></code> statement for step-by-step debugging, or implement a custom feature.</p>
<p>Then, bind-mount the directory back in the container with the <code class="docutils literal notranslate"><span class="pre">--volume</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="o">--</span><span class="n">volume</span><span class="o">=/</span><span class="n">openedx</span><span class="o">/</span><span class="n">venv</span> <span class="n">lms</span>
</pre></div>
</div>
<p>Notice how the <code class="docutils literal notranslate"><span class="pre">--volume=/openedx/venv</span></code> option differs from <a class="reference external" href="https://docs.docker.com/storage/volumes/#choose-the--v-or---mount-flag">Docker syntax</a>? Tutor recognizes this syntax and automatically converts this option to <code class="docutils literal notranslate"><span class="pre">--volume=/path/to/tutor/root/volumes/venv:/openedx/venv</span></code>, which is recognized by Docker.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">bindmount</span></code> command and the <code class="docutils literal notranslate"><span class="pre">--volume=/...</span></code> option syntax are available both for the <code class="docutils literal notranslate"><span class="pre">tutor</span> <span class="pre">local</span></code> and <code class="docutils literal notranslate"><span class="pre">tutor</span> <span class="pre">dev</span></code> commands.</p>
</div>
</section>
<section id="manual-bind-mount-to-any-directory">
<h3>Manual bind-mount to any directory<a class="headerlink" href="#manual-bind-mount-to-any-directory" title="Permalink to this headline">¶</a></h3>
<p>The above solution may not work for you if you already have an existing directory, outside of the “volumes/” directory, which you would like mounted in one of your containers. For instance, you may want to mount your copy of the <a class="reference external" href="https://github.com/edx/edx-platform/">edx-platform</a> repository. In such cases, you can simply use the <code class="docutils literal notranslate"><span class="pre">-v/--volume</span></code> <a class="reference external" href="https://docs.docker.com/storage/volumes/#choose-the--v-or---mount-flag">Docker option</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="o">--</span><span class="n">volume</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span><span class="p">:</span><span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span> <span class="n">lms</span> <span class="n">bash</span>
</pre></div>
</div>
</section>
<section id="override-docker-compose-volumes">
<h3>Override docker-compose volumes<a class="headerlink" href="#override-docker-compose-volumes" title="Permalink to this headline">¶</a></h3>
<p>The above solutions require that you explicitly pass the <code class="docutils literal notranslate"><span class="pre">-v/--volume</span></code> to every <code class="docutils literal notranslate"><span class="pre">run</span></code> or <code class="docutils literal notranslate"><span class="pre">runserver</span></code> command, which may be inconvenient. Also, these solutions are not compatible with the <code class="docutils literal notranslate"><span class="pre">start</span></code> command. To address these issues, you can create a <code class="docutils literal notranslate"><span class="pre">docker-compose.override.yml</span></code> file that will specify custom volumes to be used with all <code class="docutils literal notranslate"><span class="pre">dev</span></code> commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vim</span> <span class="s2">&quot;$(tutor config printroot)/env/dev/docker-compose.override.yml&quot;</span>
</pre></div>
</div>
<p>You are then free to bind-mount any directory to any container. For instance, to mount your own edx-platform fork:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="s2">&quot;3.7&quot;</span>
<span class="n">services</span><span class="p">:</span>
  <span class="n">lms</span><span class="p">:</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span><span class="p">:</span><span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span>
  <span class="n">cms</span><span class="p">:</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span><span class="p">:</span><span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span>
  <span class="n">lms</span><span class="o">-</span><span class="n">worker</span><span class="p">:</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span><span class="p">:</span><span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span>
  <span class="n">cms</span><span class="o">-</span><span class="n">worker</span><span class="p">:</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span><span class="p">:</span><span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span>
</pre></div>
</div>
<p>This override file will be loaded when running any <code class="docutils literal notranslate"><span class="pre">tutor</span> <span class="pre">dev</span> <span class="pre">..</span></code> command. The edx-platform repo mounted at the specified path will be automatically mounted inside all LMS and CMS containers. With this file, you should no longer specify the <code class="docutils literal notranslate"><span class="pre">-v/--volume</span></code> option from the command line with the <code class="docutils literal notranslate"><span class="pre">run</span></code> or <code class="docutils literal notranslate"><span class="pre">runserver</span></code> commands.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tutor</span> <span class="pre">local</span></code> commands loads the <code class="docutils literal notranslate"><span class="pre">docker-compose.override.yml</span></code> file from the <code class="docutils literal notranslate"><span class="pre">$(tutor</span> <span class="pre">config</span> <span class="pre">printroot)/env/local/docker-compose.override.yml</span></code> directory.</p>
</div>
</section>
</section>
<section id="point-to-a-local-edx-platform">
<h2>Point to a local edx-platform<a class="headerlink" href="#point-to-a-local-edx-platform" title="Permalink to this headline">¶</a></h2>
<p>Following the instructions <a class="reference internal" href="#bind-mounts"><span class="std std-ref">above</span></a> on how to bind-mount directories from the host above, you may mount your own <a class="reference external" href="https://github.com/edx/edx-platform/">edx-platform</a> fork in your containers by running either:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mount from the volumes/ directory</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">bindmount</span> <span class="n">lms</span> <span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="o">--</span><span class="n">volume</span><span class="o">=/</span><span class="n">openedx</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span> <span class="n">lms</span>

<span class="c1"># Mount from an arbitrary directory</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="o">--</span><span class="n">volume</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span><span class="p">:</span><span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span> <span class="n">lms</span>

<span class="c1"># Add your own volumes to $(tutor config printroot)/env/dev/docker-compose.override.yml</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="n">lms</span>
</pre></div>
</div>
<section id="prepare-the-edx-platform-repo">
<h3>Prepare the edx-platform repo<a class="headerlink" href="#prepare-the-edx-platform-repo" title="Permalink to this headline">¶</a></h3>
<p>If you choose any but the first solution above, you will have to make sure that your fork works with Tutor.</p>
<p>First of all, you should make sure that you are working off the <code class="docutils literal notranslate"><span class="pre">open-release/lilac.1</span></code> tag. See the <a class="reference internal" href="configuration.html#edx-platform-fork"><span class="std std-ref">fork edx-platform section</span></a> for more information.</p>
<p>Then, you should run the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run bash in the lms container</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="p">[</span><span class="o">--</span><span class="n">volume</span><span class="o">=...</span><span class="p">]</span> <span class="n">lms</span> <span class="n">bash</span>

<span class="c1"># Compile local python requirements</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">requirement</span> <span class="n">requirements</span><span class="o">/</span><span class="n">edx</span><span class="o">/</span><span class="n">development</span><span class="o">.</span><span class="n">txt</span>

<span class="c1"># Install nodejs packages in node_modules/</span>
<span class="n">npm</span> <span class="n">install</span>

<span class="c1"># Rebuild static assets</span>
<span class="n">openedx</span><span class="o">-</span><span class="n">assets</span> <span class="n">build</span> <span class="o">--</span><span class="n">env</span><span class="o">=</span><span class="n">dev</span>
</pre></div>
</div>
</section>
<section id="debug-edx-platform">
<h3>Debug edx-platform<a class="headerlink" href="#debug-edx-platform" title="Permalink to this headline">¶</a></h3>
<p>To debug a local edx-platform repository, add a <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">ipdb;</span> <span class="pre">ipdb.set_trace()</span></code> breakpoint anywhere in your code and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="p">[</span><span class="o">--</span><span class="n">volume</span><span class="o">=...</span><span class="p">]</span> <span class="n">lms</span>
</pre></div>
</div>
</section>
</section>
<section id="xblock-and-edx-platform-plugin-development">
<h2>XBlock and edx-platform plugin development<a class="headerlink" href="#xblock-and-edx-platform-plugin-development" title="Permalink to this headline">¶</a></h2>
<p>In some cases you will have to develop features for packages that are pip-installed next to edx-platform. This is quite easy with Tutor. Just add your packages to the <code class="docutils literal notranslate"><span class="pre">$(tutor</span> <span class="pre">config</span> <span class="pre">printroot)/env/build/openedx/requirements/private.txt</span></code> file. To avoid re-building the openedx Docker image at every change, you should add your package in editable mode. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;-e ./mypackage&quot;</span> <span class="o">&gt;&gt;</span> <span class="s2">&quot;$(tutor config printroot)/env/build/openedx/requirements/private.txt&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">requirements</span></code> folder should have the following content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">env</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">openedx</span><span class="o">/</span><span class="n">requirements</span><span class="o">/</span>
    <span class="n">private</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">mypackage</span><span class="o">/</span>
        <span class="n">setup</span><span class="o">.</span><span class="n">py</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>You will have to re-build the openedx Docker image once:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">images</span> <span class="n">build</span> <span class="n">openedx</span>
</pre></div>
</div>
<p>You should then run the development server as usual, with <code class="docutils literal notranslate"><span class="pre">runserver</span></code>. Every change made to the <code class="docutils literal notranslate"><span class="pre">mypackage</span></code> folder will be picked up and the development server will be automatically reloaded.</p>
</section>
<section id="customised-themes">
<span id="theming"></span><h2>Customised themes<a class="headerlink" href="#customised-themes" title="Permalink to this headline">¶</a></h2>
<p>With Tutor, it’s pretty easy to develop your own themes. Start by placing your files inside the <code class="docutils literal notranslate"><span class="pre">env/build/openedx/themes</span></code> directory. For instance, you could start from the <code class="docutils literal notranslate"><span class="pre">edx.org</span></code> theme present inside the <code class="docutils literal notranslate"><span class="pre">edx-platform</span></code> repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">-</span><span class="n">r</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">edx</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span><span class="n">themes</span><span class="o">/</span><span class="n">edx</span><span class="o">.</span><span class="n">org</span> <span class="s2">&quot;$(tutor config printroot)/env/build/openedx/themes/&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You should not create a soft link here. If you do, it will trigger a <code class="docutils literal notranslate"><span class="pre">Theme</span> <span class="pre">not</span> <span class="pre">found</span> <span class="pre">in</span> <span class="pre">any</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">themes</span> <span class="pre">dirs</span></code> error. This is because soft links are not properly resolved from inside docker containers.</p>
</div>
<p>Then, run a local webserver:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="n">lms</span>
</pre></div>
</div>
<p>The LMS can then be accessed at <a class="reference external" href="http://local.overhang.io:8000">http://local.overhang.io:8000</a>. You will then have to <span class="xref std std-ref">enable that theme</span> for the development domain names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">settheme</span> <span class="n">mythemename</span> <span class="n">local</span><span class="o">.</span><span class="n">overhang</span><span class="o">.</span><span class="n">io</span><span class="p">:</span><span class="mi">8000</span> <span class="n">studio</span><span class="o">.</span><span class="n">local</span><span class="o">.</span><span class="n">overhang</span><span class="o">.</span><span class="n">io</span><span class="p">:</span><span class="mi">8001</span>
</pre></div>
</div>
<p>Re-build development docker image (and compile assets):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">images</span> <span class="n">build</span> <span class="n">openedx</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>Watch the themes folders for changes (in a different terminal):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="n">watchthemes</span>
</pre></div>
</div>
<p>Make changes to some of the files inside the theme directory: the theme assets should be automatically recompiled and visible at <a class="reference external" href="http://local.overhang.io:8000">http://local.overhang.io:8000</a>.</p>
</section>
<section id="custom-edx-platform-settings">
<h2>Custom edx-platform settings<a class="headerlink" href="#custom-edx-platform-settings" title="Permalink to this headline">¶</a></h2>
<p>By default, tutor settings files are mounted inside the docker images at <code class="docutils literal notranslate"><span class="pre">/openedx/edx-platform/lms/envs/tutor/</span></code> and <code class="docutils literal notranslate"><span class="pre">/openedx/edx-platform/cms/envs/tutor/</span></code>. In the various <code class="docutils literal notranslate"><span class="pre">dev</span></code> commands, the default <code class="docutils literal notranslate"><span class="pre">edx-platform</span></code> settings module is set to <code class="docutils literal notranslate"><span class="pre">tutor.development</span></code> and you don’t have to do anything to set up these settings.</p>
<p>If, for some reason, you want to use different settings, you will need to define the <code class="docutils literal notranslate"><span class="pre">TUTOR_EDX_PLATFORM_SETTINGS</span></code> environment variable.</p>
<p>For instance, let’s assume you have created the <code class="docutils literal notranslate"><span class="pre">/path/to/edx-platform/lms/envs/mysettings.py</span></code> and <code class="docutils literal notranslate"><span class="pre">/path/to/edx-platform/cms/envs/mysettings.py</span></code> modules. These settings should be pretty similar to the following files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$(tutor config printroot)/env/apps/openedx/tutor/lms/development.py
$(tutor config printroot)/env/apps/openedx/tutor/cms/development.py
</pre></div>
</div>
<p>Alternatively, the <code class="docutils literal notranslate"><span class="pre">mysettings.py</span></code> files can import the tutor development settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Beginning of mysettings.py</span>
<span class="kn">from</span> <span class="nn">.tutor.development</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>You should then specify the settings to use on the host:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">TUTOR_EDX_PLATFORM_SETTINGS</span><span class="o">=</span><span class="n">mysettings</span>
</pre></div>
</div>
<p>From then on, all <code class="docutils literal notranslate"><span class="pre">dev</span></code> commands will use the <code class="docutils literal notranslate"><span class="pre">mysettings</span></code> module. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">dev</span> <span class="n">runserver</span> <span class="n">lms</span>
</pre></div>
</div>
</section>
<section id="running-edx-platform-unit-tests">
<h2>Running edx-platform unit tests<a class="headerlink" href="#running-edx-platform-unit-tests" title="Permalink to this headline">¶</a></h2>
<p>It’s possible to run the full set of unit tests that ship with <a class="reference external" href="https://github.com/edx/edx-platform/">edx-platform</a>. To do so, you should first build the “test” target of the “openedx-dev” Docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tutor</span> <span class="n">images</span> <span class="n">build</span> <span class="o">--</span><span class="n">target</span><span class="o">=</span><span class="n">test</span> <span class="n">openedx</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don’t forget to re-build the development image afterwards if you’d like to run <code class="docutils literal notranslate"><span class="pre">dev</span></code> commands again! To do so, run <code class="docutils literal notranslate"><span class="pre">tutor</span> <span class="pre">images</span> <span class="pre">build</span> <span class="pre">openedx-dev</span></code> after you are done testing.</p>
</div>
<p>Then, run unit tests with <code class="docutils literal notranslate"><span class="pre">pytest</span></code> commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run a test container</span>
<span class="n">tutor</span> <span class="n">dev</span> <span class="n">run</span> <span class="n">lms</span> <span class="n">bash</span>

<span class="c1"># Run tests on common apps</span>
<span class="n">unset</span> <span class="n">DJANGO_SETTINGS_MODULE</span>
<span class="n">export</span> <span class="n">EDXAPP_TEST_MONGO_HOST</span><span class="o">=</span><span class="n">mongodb</span>
<span class="n">pytest</span> <span class="n">common</span>
<span class="n">pytest</span> <span class="n">openedx</span>

<span class="c1"># Run tests on LMS</span>
<span class="n">export</span> <span class="n">DJANGO_SETTINGS_MODULE</span><span class="o">=</span><span class="n">lms</span><span class="o">.</span><span class="n">envs</span><span class="o">.</span><span class="n">tutor</span><span class="o">.</span><span class="n">test</span>
<span class="n">pytest</span> <span class="n">lms</span>

<span class="c1"># Run tests on CMS</span>
<span class="n">export</span> <span class="n">DJANGO_SETTINGS_MODULE</span><span class="o">=</span><span class="n">cms</span><span class="o">.</span><span class="n">envs</span><span class="o">.</span><span class="n">tutor</span><span class="o">.</span><span class="n">test</span>
<span class="n">pytest</span> <span class="n">cms</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Getting all edx-platform unit tests to pass on Tutor is currently a work-in-progress. Some unit tests are still failing. If you manage to fix some of these, please report your findings in the <a class="reference external" href="https://discuss.overhang.io">Tutor forums</a>.</p>
</div>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="configuration.html" class="btn btn-neutral float-right" title="Configuration and customisation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="k8s.html" class="btn btn-neutral float-left" title="Kubernetes deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>